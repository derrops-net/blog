<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    Tag: architecture
  
</title>

<meta property="og:type" content="website">
<meta property="og:title" content="Derrops">
<meta property="og:url" content="http://example.com/tags/architecture/index.html">
<meta property="og:site_name" content="Derrops">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Derrick Futschik">
<meta name="twitter:card" content="summary">


  <link rel="alternative" href="/atom.xml" title="Derrops" type="application/atom+xml">



  <link rel="icon" href="/favicon.png">



<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">


<link rel="stylesheet" href="/styles/main.css">







<meta name="generator" content="Hexo 7.2.0"></head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">Derrops</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">
        Derrops
      </a></h1>
    
        <div class="info">
          <div class="content">
            
          </div>
          
            <div class="avatar">
              
                <a href="/about/me"><img src="https://media.licdn.com/dms/image/C5603AQG9FfmyT5LNnA/profile-displayphoto-shrink_800_800/0/1552436367339?e=1720051200&amp;v=beta&amp;t=mNoCMNoIua6BnJKDxCaICzR5EtR3F30Li--s-OoASu0"></a>
                
                    
                      <div class="author">
                        Derrick Futschik
                      </div>
                      
            </div>
            
        </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
                    <li>
                      <a href="/about/me" title="About Me" external="false">About Me</a>
                    </li>
                    
                      
        </ul>
        
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">Category</a>
                
              </li>
              
                      
            
                <li class="tag-list-container">
                  <a href="javascript:;">Tag</a>
                  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/architecture/" rel="tag">architecture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/" rel="tag">elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es/" rel="tag">es</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opensearch/" rel="tag">opensearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opensearch-typescript/" rel="tag">opensearch-typescript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/software/" rel="tag">software</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/" rel="tag">typescript</a><span class="tag-list-count">1</span></li></ul>
                </li>
                
                      
            
                  <li class="archive-list-container">
                    <a href="javascript:;">Archive</a>
                    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/">2024</a><span class="archive-list-count">2</span></li></ul>
                  </li>
                  
                      
        </ul>
        
        <ul class="nav">
          
            
                    <li>
                      <a href="/" title="Homepage" external="false">Homepage</a>
                    </li>
                    
                      
            
                    <li>
                      <a href="/archives" title="By Year" external="false">By Year</a>
                    </li>
                    
                      
        </ul>
        
        <ul class="nav">
          
            
                    <li>
                      <a href="/about/videos" title="Favourite Videos" external="false">Favourite Videos</a>
                    </li>
                    
                      
        </ul>
        
        <ul class="nav">
          
            
                    <li>
                      <a href="https://github.com/derrops-net/blog-derrops" title="Blog" target="_blank" rel="noopener">Blog</a>
                    </li>
                    
                      
            
                    <li>
                      <a href="https://github.com/derrops-net" title="Github" target="_blank" rel="noopener">Github</a>
                    </li>
                    
                      
            
                    <li>
                      <a href="https://www.linkedin.com/in/derrick-futschik-38b47162" title="LinkedIn" target="_blank" rel="noopener">LinkedIn</a>
                    </li>
                    
                      
        </ul>
        
          
  </div>
</div>
    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          <h1>architecture</h1>


  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2024/05/01/capability-base-development/index/" >
  Capability Driven Development
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2024/05/01/capability-base-development/index/"><span class="article-date">
  2024-05-01
</span>
</a>
        

        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/architecture/" rel="tag">architecture</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/software/" rel="tag">software</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>The basic premise of Capability Driven Development, (A Derrops Coined Term) is that:</p>
<p><span style="font-size:3em;">“Business Logic Should not Constrain Capability”</span></p>
<p>It’s good to first work with a working definitions of terms to break down this statement, here is a good short blog post about the difference between : <a target="_blank" rel="noopener" href="https://www.linkedin.com/pulse/service-vs-capability-process-daniel-dekkers/">Service vs. Capability vs. Process</a> </p>
<ul>
<li><strong>Capability:</strong> is the what we do</li>
<li><strong>Process:</strong> is the how we do it (–&gt; how a capability is executed)</li>
<li><strong>Service:</strong> is the how we access it (–&gt; how a capability is accessed)</li>
</ul>
<p><img src="/images/posts/capability-base-development/capability-archiecture.png" alt="Capability"></p>
<p>We’ll get to some of these terms shortly, but if we look at Capability it’s “what we do”. We could also change this a little to be “what we can do”, and then in the <code>Service</code> level, we control the access and constrain what we do as just because the business can do something, doesn’t mean it makes sense to for any number of reasons.</p>
<h1 id="The-Case-for-Capability-Driven-Development"><a href="#The-Case-for-Capability-Driven-Development" class="headerlink" title="The Case for Capability Driven Development"></a>The Case for Capability Driven Development</h1><h2 id="SRP"><a href="#SRP" class="headerlink" title="SRP"></a>SRP</h2><p>But just because it doesn’t make sense to do something, doesn’t mean we should put artificial constraints on our capability. I put forward a number of reasons this is the case, probably the most easiest way to make the case for this is the old: Single-responsibility principal <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Single-responsibility_principle">SRP</a>.</p>
<p>Within an application we have <em>Business Logic</em>. Based on <strong>SRP</strong>, <em>Business Logic|Rules</em> should not be scattered all over the codebase. But rather reside in the Service Layer, which is the the interface to the business, and speaks the common Domain Specific Language.</p>
<h2 id="Encapsulation"><a href="#Encapsulation" class="headerlink" title="Encapsulation"></a>Encapsulation</h2><p>The other reason is that if we encapsulate the <em>BL</em> in the Service Layer, then when the <em>BL</em> changes, we only need to change the Service Layer, and we don’t need to touch any lower-level libraries. We can always get a good feel for how our code architecture performs when we need to change it. If some high level <em>BL</em> were to change, but we still needed for the most part, the same capabilities we had before, but we had to change lower level software components that dealt with uploading files or saving information to a database, that would be a sign that how we have structured our code in a way in which <em>BL</em> is not encapsulated, and other un-related functionality is being needed to change.</p>
<h2 id="Reusability-Example"><a href="#Reusability-Example" class="headerlink" title="Reusability Example"></a>Reusability Example</h2><p>When we have business logic and code in the one place, we cannot reuse that functionality for another context with different business logic. Let’s look at some concrete example with a Spring <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html">JpaRepository</a>. Let’s assume we have a <code>ComplaintEntity</code> representing a complaint by customers for our business. Now let’s say I have a business rule which is that a complaint cannot be deleted within the first 7 days it was created.</p>
<p>Within the <code>ComplaintRepository</code>, we can override the delete method with our new rule:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">    <span class="comment">// TODO check current age of complaint</span></span><br><span class="line">    <span class="comment">// if age &lt; 7 days through an exception</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Funnily enough there is a similiar question on StackOverflow <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/13036159/spring-data-override-save-method">Spring Data: Override save method</a> and lets look at what the OP ends up doing: 😉<br><img src="/images/posts/capability-base-development/override-delete-method-post.png" alt="SO"></p>
<p>Let’s assume we do successfully provide our own <code>default</code> implementation of this method, and then the business comes along and says to us, we want to allow users to delete their own complaints if they accept one of our explanations.</p>
<p>Well we’d actually lost the normal <code>delete</code> capability from our Repository because we baked in a business constraint into the functionality. The same thing could have also been achieved by annotating a method at the Entity level with: <code>@PreRemove</code> and doing the check there. If we’d done that then we’d be in real trouble. As we couldn’t even implement a new delete method it would still trigger this method, and we’d have to undo our other code and implement both business processes again.</p>
<p>Had we done this in the service layer, firstly it’s easy to then find the business logic already present in the application if Capability Driven Development is followed, and then secondly we could add the appropriate logic there which. We can either have 2 different methods each with different security controls placed on it, or a single method with the 2 rules together in the one location with the one method.</p>
<p>Stylistic I would go for having one method, as developers don’t need to sort through multiple use-cases. There are other reasons for also keeping the <em>BR</em> separate, such as when testing.</p>
<h2 id="Checklist"><a href="#Checklist" class="headerlink" title="Checklist"></a>Checklist</h2><p>An easy way to make sure you are following this is to:</p>
<ol>
<li>Make sure Services contain all the business logic, but at the same time, services, just like non-technical business people do not deal with lower-level technical details</li>
</ol>
<ul>
<li>A capability is anything that is not a service. It should not have any business logic or constraints applied to it.</li>
</ul>
<h2 id="Business-Rules-should-Guide-Capabilities-Architecture"><a href="#Business-Rules-should-Guide-Capabilities-Architecture" class="headerlink" title="Business Rules should Guide Capabilities Architecture"></a>Business Rules should Guide Capabilities Architecture</h2><p>The biggest conflict I see between business and the software development team is:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">What to Build?</span><br></pre></td></tr></table></figure>

<h2 id="The-intuitive-interpretation"><a href="#The-intuitive-interpretation" class="headerlink" title="The intuitive interpretation"></a>The intuitive interpretation</h2><p>It’s only occurred to me recently that I view this question differently than most people. Most people would look at this question as the same as:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">What does the business need?</span><br></pre></td></tr></table></figure>

<h3 id="What-should-happen"><a href="#What-should-happen" class="headerlink" title="What should happen"></a>What should happen</h3><p>Let’s build what the business is telling us to build right now. That seems to be the most intuitive way to respond to this request, and what most people do. An initial MVP product is converged on, tasks are created, and Developers start to update and create new services.</p>
<h3 id="What-shouldn’t-happen"><a href="#What-shouldn’t-happen" class="headerlink" title="What shouldn’t happen"></a>What shouldn’t happen</h3><p>Developers should not forsake <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it">YAGNI</a>, and cater for extra requirements the business will never need. Nor should they go off and build abstract platforms and frameworks just because the given immediate business need is not an air tight fit to existing availabile opensource solutions.</p>
<p>After all, as long as developers are followings some best practices, the development effort should not be hindered, and the system can be re-architecture later if need be, which is acceptable and common place and businesses grow, teams expand etc.</p>
<h2 id="The-un-intuitive-interpretation"><a href="#The-un-intuitive-interpretation" class="headerlink" title="The un-intuitive interpretation"></a>The un-intuitive interpretation</h2><p>The problem with <code>What does the business need?</code> is that sometimes this question is too direct, and we don’t actually know. So what happens is the business makes a <strong>business decision</strong>. It decides what it needs. But we don’t really decide what we need do we? We just inherently need them. It’s an important destination between the two. What we end up deciding on is not necessarily what we need. It’s easy for a farming business to know it needs a new tractor, or a restaurant it needs a new fridge. But it’s really hard to know what software to develop because we can’t see all the ramifications of the changes we are going to make.</p>
<p>What about instead we changed the question of <code>What to Build?</code> to</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">What Capabilities do we need?</span><br></pre></td></tr></table></figure>

<p>I did find one post about these distinctions which excited me that others are thinking this way <a target="_blank" rel="noopener" href="https://www.linkedin.com/pulse/service-vs-capability-process-daniel-dekkers/">Service vs. Capability vs. Process</a> which the author gives great definitions:</p>
<ul>
<li><strong>Capability:</strong> is the what we do</li>
<li><strong>Process:</strong> is the how we do it (–&gt; how a capability is executed)</li>
<li><strong>Service:</strong> is the how we access it (–&gt; how a capability is accessed)</li>
</ul>
<p>As far as developers are concerned:</p>
<ul>
<li>Capability Does not contain business logic</li>
<li>Service contains business logic</li>
</ul>
<p>In a Spring Application for example we could consider a <code>Repository</code> a capability. But as mentioned the Capability should be the what we do, and the service control how all these capabilities are interacting and playing together. But back to the question interpretation, if we develop a capability, we can break up what the business is telling us into what is purely a business decision, which could be a limitation on functionality&#x2F;capability, it is usually a constraint. And then, the functionality&#x2F;capability itself. In this way, we free ourselves of the chains of business decisions, and are free to develop great capabilities, and then bake those constraints into the <code>Service</code> layer.</p>
<p>Let’s take a <code>SpringJPARepository</code> as an example. Now the business might tell us that we are never allowed to delete a row in a database. Does that mean we can’t use a default interface as it has all these methods we cannot use? Of course not we just don’t need to make use of that capability, it’s there if we need it, but there is no need to spend extra effort to enforce a constraint at the capability level. Instead this constraint can be in the Service level, were delete is just not callable.</p>
<p>We can also ask ourselves why there is no reusable Repository without the delete functionality? Well obviously because that is not as useful, but it’s not as useful because a constraint is baked into it. Let’s say we change things a little and have a business rule such as</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot delete before 14 days have passed</span><br></pre></td></tr></table></figure>
<p>If we put this constraint into our <code>Repository</code> layer, and override the delete method, this again is a constraint going into the Repository Layer. This constraint should go into our <code>Service</code> layer as this is a business decision. That’s not to say we might develop methods in the repository Layer to help meet business requirements. But we don’t hinder a capability and change the delete function in the repository, because as soon as we do need to delete a record with less than 14 days, say a super admin. We will need to alter our Repository again, as we baked the 14 day constraint into the delete method.</p>

        
      </div>
    </div>

  
    </div>
  






          <div class="main-footer">
  
    © 2024 Derrops - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  
<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>


  
<link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">

  
<link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">


  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  
<script src="/PhotoSwipe/photoswipe.js"></script>

  
<script src="/PhotoSwipe/photoswipe-ui-default.js"></script>




<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>


<script src="/scripts/main.js"></script>


</body>
</html>
